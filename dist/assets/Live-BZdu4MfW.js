import{R as e,t as V,N as k,r as a,k as X,u as Y,l as W,M as B,q as M,s as $}from"./index-es2nNZ9l.js";import{t as H,w as C}from"./triggerConfetti-DCRvJDBe.js";import{X as g}from"./x-DVFZl4CE.js";import{C as z,a as D,I as G}from"./confetti.module-DfllA1Xf.js";import{E as J}from"./expand-CuIbultf.js";const K=()=>e.createElement("div",{className:"w-screen h-screen fixed flex justify-center items-center transition-all duration-500 ease-out inset-0 bg-black/70 z-50"},e.createElement("div",{className:"flex flex-col bg-white w-full max-w-lg shadow-2xl border border-white rounded-3xl p-8 animate-fadeIn items-center"},e.createElement("div",{className:"flex flex-col justify-center items-center w-full"},e.createElement("div",{className:"pb-5"},e.createElement("h1",{className:"font-Outfit font-bold text-3xl md:text-4xl bg-gradient-to-r from-indigo-400 via-pink-400 to-purple-700 text-transparent bg-clip-text drop-shadow-lg text-center"},"Thank You For Using Quizfy!")),e.createElement("div",{className:"mb-4 flex justify-center"},e.createElement("img",{src:V,className:"w-40 md:w-48 drop-shadow-xl rounded-full border-4 border-indigo-100",alt:"Thank you"})),e.createElement("div",{className:"font-Outfit text-center text-stone-700 text-base md:text-lg px-2"},e.createElement("p",{className:"pt-4 pb-2"},"Quiz is Ended By the Admin!",e.createElement("br",null),e.createElement("span",{className:"inline-block"},"Hope You Enjoyed the Experience")),e.createElement("p",{className:"text-sm text-stone-500"},"You can check the your history in the ",e.createElement("span",{className:"font-semibold text-indigo-500"},"history Session")," in your Profile."),e.createElement("p",{className:"text-sm text-stone-500 flex justify-center items-center  gap-1"},"Please ",e.createElement(k,{className:"text-indigo-500 font-bold",to:"/ReviewUs"},"Review Us")," and share your experience")),e.createElement("div",{className:"mt-8 w-full flex justify-center"},e.createElement(k,{to:"/App/Admin/Home",className:"bg-gradient-to-r font-Montserrat     from-indigo-400 via-pink-400 to-purple-700 text-white px-6 py-2 rounded-full font-semibold shadow-md hover:scale-105 transition-transform duration-200"},"Go To Home")))),e.createElement("style",null,`
                @keyframes fadeIn {
                    0% { opacity: 0; transform: scale(0.95); }
                    100% { opacity: 1; transform: scale(1); }
                }
                .animate-fadeIn {
                    animation: fadeIn 0.7s cubic-bezier(0.4,0,0.2,1);
                }
            `)),Z=({selectedOption:n,detail:o,onClose:c})=>(a.useEffect(()=>{H()},[]),e.createElement("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 font-Outfit"},e.createElement("div",{className:"relative w-full max-w-md bg-white rounded-xl shadow-2xl border border-gray-200 p-6"},e.createElement("button",{onClick:()=>c(!1),"aria-label":"Close",className:"absolute cursor-pointer top-4 right-4 p-2 rounded-md text-gray-400 hover:text-gray-600 transition"},e.createElement(g,{size:20})),e.createElement("div",{className:"flex justify-center mb-4"},e.createElement(z,{className:"text-emerald-600",size:72,strokeWidth:2.5})),e.createElement("h2",{className:"text-2xl font-semibold text-gray-900 text-center mb-2"},"Correct Answer!"),e.createElement("p",{className:"text-gray-600 text-center mb-6"},"Well done â€” you selected the right option."),e.createElement("div",{className:"p-4 rounded-lg border border-emerald-200 bg-emerald-50 mb-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-9 w-9 items-center justify-center rounded-md bg-emerald-100"},e.createElement(z,{size:20,className:"text-emerald-600"})),e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"text-xs text-gray-500"},"Correct answer"),e.createElement("div",{className:"text-sm font-medium text-gray-900"},n.text)))),e.createElement("div",{className:"bg-gray-50 rounded-md border border-gray-200 p-4 text-sm text-gray-700 mb-6"},e.createElement("div",{className:"font-medium text-gray-800 mb-1"},"Why this is correct"),e.createElement("p",{className:"leading-relaxed"},o||"Nothing Provided by Admin!")),e.createElement("button",{onClick:()=>c(!1),className:"w-full cursor-pointer bg-emerald-600 text-white font-semibold py-3 rounded-lg hover:bg-emerald-700 transition"},"Continue")))),ee=({onClose:n,selectedOption:o,CorrectOption:c,detail:m})=>{const[d,s]=a.useState(!1);return a.useEffect(()=>{s(!0)},[]),e.createElement(e.Fragment,null,e.createElement("style",null,`
        @keyframes scaleIn {
          0% { transform: scale(0.9); opacity: 0; }
          100% { transform: scale(1); opacity: 1; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          20% { transform: translateX(-6px); }
          40% { transform: translateX(6px); }
          60% { transform: translateX(-4px); }
          80% { transform: translateX(4px); }
        }
        @keyframes bgRedPulse {
          0%, 100% { background-color: rgba(0,0,0,0.6); }
          50% { background-color: rgba(220,38,38,0.7); }
        }
        .animate-wrong {
          animation: scaleIn 0.3s ease-out,
                     shake 0.5s ease-in-out 0.3s;
        }
        .bg-red-pulse {
          animation: bgRedPulse 1.2s ease-in-out forwards;
        }
      `),e.createElement("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4 font-Outfit bg-black/60 bg-red-pulse"},e.createElement("div",{className:`relative w-full max-w-md bg-white rounded-xl shadow-2xl border border-gray-200 p-6 ${d?"animate-wrong":""}`},e.createElement("button",{onClick:()=>n(!1),"aria-label":"Close",className:"absolute cursor-pointer top-4 right-4 p-2 rounded-md text-gray-400 hover:text-gray-600 transition"},e.createElement(g,{size:20})),e.createElement("div",{className:"flex justify-center mb-4"},e.createElement(D,{className:"text-red-600",size:72,strokeWidth:2.5})),e.createElement("h2",{className:"text-2xl font-semibold text-gray-900 text-center mb-2"},"Wrong Answer"),e.createElement("p",{className:"text-gray-600 text-center mb-6"},"Your selected answer is incorrect."),e.createElement("div",{className:"p-4 rounded-lg border border-red-200 bg-red-50 mb-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-9 w-9 items-center justify-center rounded-md bg-red-100"},e.createElement(g,{size:20,className:"text-red-600"})),e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"text-xs text-gray-500"},"Your answer"),e.createElement("div",{className:"text-sm font-medium text-gray-900"},o)))),e.createElement("div",{className:"bg-gray-50 rounded-md border border-gray-200 p-4 text-sm text-gray-700 mb-6"},e.createElement("div",{className:"font-bold text-base text-green-800 mb-1"},"Correct Option : ",c),e.createElement("p",{className:"leading-relaxed"},m||"Nothing Provided By Admin!")),e.createElement("button",{onClick:()=>n(!1),className:"w-full cursor-pointer bg-red-600 text-white font-semibold py-3 rounded-lg hover:bg-red-700 transition"},"Better Luck, Next time!"))))},ne=()=>{const{presentationId:n}=X(),{userId:o,userName:c}=Y(),[m,d]=a.useState([]),[s,b]=a.useState({}),[j,S]=a.useState(""),[u,E]=a.useState(!1),[I,O]=a.useState(!1),[f,P]=a.useState(""),[h,q]=a.useState(""),[w,_]=a.useState(""),N=a.useRef(null),l=a.useRef(null),[v,i]=a.useState(!1),[R,Q]=a.useState(!1),[A,x]=a.useState(!1),[L,p]=a.useState(!1),F=()=>{const t=N.current;t&&t.requestFullscreen?t.requestFullscreen().catch(r=>{console.warn("Fullscreen request failed:",r)}):console.warn("Fullscreen API is not supported in this browser.")},T=()=>{l.current=$("https://ai-based-quiz-builder-quizfy-backend.onrender.com/adminControlledQuiz",{transports:["websocket","polling"]}),l.current.emit("joinQuizByUser",{presentationId:n,userId:o,userName:c}),l.current.on("newQuestionForUser",({question:t})=>{console.log("New question received:",t),i(!1),b(t),x(!1),p(!1),t.designType=="quiz"&&(P(t.options.find(r=>r.answer===!0)||null),_(t.description))}),l.current.on("alreadyVoted",()=>{i(!0),localStorage.setItem("voted_question",s._id),console.log("You have already voted for this question.")}),l.current.emit("getComments",{presentationId:n}),l.current.on("commentUpdate",({comments:t})=>{console.log("Received comments:",t),d(t||[])}),l.current.on("newComment",t=>{d(r=>[...r,t]),console.log("New comment received:",t)}),l.current.on("quizEnded",()=>{console.log("Quiz has ended."),Q(!0),b({}),i(!1),localStorage.removeItem("voted_question")})},y=(t,r)=>{v||!l.current||(s.designType=="quiz"&&(q(r.text),r._id==f._id?x(!0):p(!0)),l.current&&(l.current.emit("submitVote",{presentationId:n,userId:o,userName:c,optionIndex:t}),i(!0),localStorage.setItem("voted_question",s._id)))};a.useEffect(()=>(T(),()=>l.current?.disconnect()),[n]),a.useEffect(()=>{if(S(s.designTemplate||""),s._id){const t=localStorage.getItem("voted_question");t?t===s._id?i(!0):(localStorage.removeItem("voted_question"),i(!1)):i(!1)}},[s]);const U=t=>{l.current.emit("sendComment",{presentationId:n,userId:o,userName:c,message:t})};return e.createElement("div",{ref:N,className:"relative w-screen min-h-screen flex flex-col justify-between"},e.createElement("div",{className:`w-full flex-1 ${j} flex flex-col justify-center items-center bg-center bg-cover px-4 md:px-8`},e.createElement("div",{className:"w-full flex justify-center mt-4"},e.createElement("img",{src:W,className:"w-28 md:w-40 lg:w-48",alt:"Logo"})),e.createElement("div",{className:"w-full flex flex-col flex-1/2 justify-center items-center"},v?e.createElement("div",{className:"w-full h-full flex flex-col justify-center items-center"},e.createElement("div",null,e.createElement("img",{src:C,className:"h-23 animate-bounce",alt:"Please wait"})),e.createElement("div",{className:"w-[60%] text-center flex justify-center items-center mt-6"},e.createElement("h1",{className:"text-stone-700 text-2xl font-Outfit"},"Your Response is being Submitted, Please wait for the Presenter to change the Question!"))):e.createElement("div",{className:"w-full"},e.createElement("div",{className:"w-full h-full flex flex-col justify-center items-center"},e.createElement("div",{className:"w-full"},e.createElement("div",{className:"text-black w-full flex justify-center items-center font-Outfit text-2xl text-center"},e.createElement("h1",{className:"w-[80%]"},s.question||e.createElement("div",{className:"w-full h-full flex flex-col justify-center items-center gap-5"},e.createElement("div",{className:"w-full flex justify-center items-center"},e.createElement("img",{src:C,className:"h-23 animate-bounce",alt:"Please wait"})),e.createElement("div",{className:"text-stone-700 text-2xl font-Outfit"},"Waiting for the Presenter to Start the Quiz!"),e.createElement("div",{className:"w-full flex justify-center items-center"},e.createElement("p",{className:"text-sm w-[60%] text-gray-700"},"If Presenter is Live and you are unable to see the question, please refresh the page once or contact us."))))),e.createElement("div",{className:"w-full flex justify-center items-center mt-6"},s.Image==null?e.createElement("div",{className:"w-full max-w-2xl flex flex-col justify-center items-center gap-4 px-4 sm:px-8"},(s.options||[]).map((t,r)=>e.createElement("div",{key:t._id||r,className:"h-16 w-[80%] cursor-pointer text-white font-Outfit flex items-center px-4 rounded-xl transition-all duration-300 hover:scale-[1.01] bg-stone-900",onClick:()=>y(r,t)},e.createElement("span",{className:"w-full text-sm sm:text-base md:text-lg"},t.text)))):e.createElement("div",{className:"flex flex-col justify-center gap-6 items-center w-full"},e.createElement("div",{className:"h-[300px] w-full flex justify-center items-center"},e.createElement("img",{src:s.Image,className:"w-full sm:w-auto sm:h-full",alt:""})),e.createElement("div",{className:"w-full lg:w-[60%] grid grid-cols-1 md:grid-cols-2 place-content-center gap-4"},(s.options||[]).map((t,r)=>e.createElement("div",{key:t._id||r,className:"h-16 w-[100%] cursor-pointer text-white font-Outfit flex items-center px-4 rounded-xl transition-all duration-300 hover:scale-[1.01] bg-stone-900",onClick:()=>y(r,t)},e.createElement("span",{className:"w-full text-sm sm:text-base md:text-lg"},t.text))))))))))),e.createElement("div",{className:"fixed bottom-6 right-[155px] md:bottom-8 md:right-[155px] cursor-pointer p-3 border border-stone-300 rounded-full bg-stone-900 z-10 shadow-md",onClick:F},e.createElement(J,{color:"white"})),e.createElement("div",{className:"fixed bottom-6 right-[96px] md:bottom-8 md:right-[96px] cursor-pointer p-3 border border-stone-300 rounded-full bg-stone-900 z-10 shadow-md",onClick:()=>O(!I)},e.createElement(G,{color:"white"})),e.createElement("div",{className:"fixed bottom-6 right-10 md:bottom-8 md:right-10 cursor-pointer p-3 border border-stone-300 rounded-full bg-stone-900 z-10 shadow-md",onClick:()=>E(!u)},e.createElement(B,{color:"white"})),e.createElement("div",{className:`fixed left-[18%] sm:left-[55%] top-[23%] md:left-[60%] lg:top-[23%] lg:left-[72%] z-50 w-[90%] sm:w-[400px] max-w-[90%] transition-all ease-in-out duration-500 ${u?"opacity-100":"opacity-0 pointer-events-none"}`},e.createElement(M,{commentList:m,onClose:()=>E(!1),isVisible:u,sendComment:U})),L&&e.createElement("div",{className:"absolute top-0 transition-all ease-in-out duration-100 left-0 z-[100]"},e.createElement(ee,{selectedOption:h,CorrectOption:f.text,detail:w,onClose:p})),A&&e.createElement("div",{className:"absolute top-0 transition-all ease-in-out duration-100  left-0 z-[100]"},e.createElement(Z,{selectedOption:h,CorrectOption:f.text,detail:w,onClose:x})),e.createElement("div",{className:`w-screen h-screen absolute top-0 left-0 z-[90] transition-all ease-in-out duration-500 ${R?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`},e.createElement(K,null)))};export{ne as default};
