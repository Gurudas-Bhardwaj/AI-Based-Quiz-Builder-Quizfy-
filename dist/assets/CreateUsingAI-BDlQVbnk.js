import{r as q,R as r,u as H,a as X}from"./index-es2nNZ9l.js";import{b as Y}from"./index-oAVH3PF_.js";function $(n,o,s,t){return new(s||(s=Promise))(function(e,c){function l(f){try{p(t.next(f))}catch(a){c(a)}}function u(f){try{p(t.throw(f))}catch(a){c(a)}}function p(f){var a;f.done?e(f.value):(a=f.value,a instanceof s?a:new s(function(g){g(a)})).then(l,u)}p((t=t.apply(n,[])).next())})}function _(n,o){var s,t,e,c,l={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(p){return function(f){return function(a){if(s)throw new TypeError("Generator is already executing.");for(;l;)try{if(s=1,t&&(e=2&a[0]?t.return:a[0]?t.throw||((e=t.return)&&e.call(t),0):t.next)&&!(e=e.call(t,a[1])).done)return e;switch(t=0,e&&(a=[2&a[0],e.value]),a[0]){case 0:case 1:e=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,t=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(e=l.trys,!((e=e.length>0&&e[e.length-1])||a[0]!==6&&a[0]!==2)){l=0;continue}if(a[0]===3&&(!e||a[1]>e[0]&&a[1]<e[3])){l.label=a[1];break}if(a[0]===6&&l.label<e[1]){l.label=e[1],e=a;break}if(e&&l.label<e[2]){l.label=e[2],l.ops.push(a);break}e[2]&&l.ops.pop(),l.trys.pop();continue}a=o.call(n,l)}catch(g){a=[6,g],t=0}finally{s=e=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([p,f])}}}function J(n){var o=typeof Symbol=="function"&&Symbol.iterator,s=o&&n[o],t=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")}function P(n,o){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var t,e,c=s.call(n),l=[];try{for(;(o===void 0||o-- >0)&&!(t=c.next()).done;)l.push(t.value)}catch(u){e={error:u}}finally{try{t&&!t.done&&(s=c.return)&&s.call(c)}finally{if(e)throw e.error}}return l}function z(n,o,s){if(arguments.length===2)for(var t,e=0,c=o.length;e<c;e++)!t&&e in o||(t||(t=Array.prototype.slice.call(o,0,e)),t[e]=o[e]);return n.concat(t||Array.prototype.slice.call(o))}function L(n,o,s,t,e){for(var c=[],l=5;l<arguments.length;l++)c[l-5]=arguments[l];return $(this,void 0,void 0,function(){var u,p,f,a,g,w;return _(this,function(b){switch(b.label){case 0:b.trys.push([0,12,13,14]),u=J(c),p=u.next(),b.label=1;case 1:if(p.done)return[3,11];switch(f=p.value,typeof f){case"string":return[3,2];case"number":return[3,4];case"function":return[3,6]}return[3,8];case 2:return[4,Z(n,o,f,s,t,e)];case 3:return b.sent(),[3,10];case 4:return[4,K(f)];case 5:return b.sent(),[3,10];case 6:return[4,f.apply(void 0,z([n,o,s,t,e],P(c),!1))];case 7:return b.sent(),[3,10];case 8:return[4,f];case 9:b.sent(),b.label=10;case 10:return p=u.next(),[3,1];case 11:return[3,14];case 12:return a=b.sent(),g={error:a},[3,14];case 13:try{p&&!p.done&&(w=u.return)&&w.call(u)}finally{if(g)throw g.error}return[7];case 14:return[2]}})})}function Z(n,o,s,t,e,c){return $(this,void 0,void 0,function(){var l,u;return _(this,function(p){switch(p.label){case 0:return l=n.textContent||"",u=function(f,a){var g=P(a).slice(0);return z(z([],P(f),!1),[NaN],!1).findIndex(function(w,b){return g[b]!==w})}(l,s),[4,ee(n,z(z([],P(ne(l,o,u)),!1),P(te(s,o,u)),!1),t,e,c)];case 1:return p.sent(),[2]}})})}function K(n){return $(this,void 0,void 0,function(){return _(this,function(o){switch(o.label){case 0:return[4,new Promise(function(s){return setTimeout(s,n)})];case 1:return o.sent(),[2]}})})}function ee(n,o,s,t,e){return $(this,void 0,void 0,function(){var c,l,u,p,f,a,g,w,b,F,i,y,N;return _(this,function(m){switch(m.label){case 0:if(c=o,e){for(l=0,u=1;u<o.length;u++)if(p=P([o[u-1],o[u]],2),f=p[0],(a=p[1]).length>f.length||a===""){l=u;break}c=o.slice(l,o.length)}m.label=1;case 1:m.trys.push([1,6,7,8]),g=J(function(h){var k,x,E,S,I,T,v;return _(this,function(O){switch(O.label){case 0:k=function(R){return _(this,function(M){switch(M.label){case 0:return[4,{op:function(Q){return requestAnimationFrame(function(){return Q.textContent=R})},opCode:function(Q){var B=Q.textContent||"";return R===""||B.length>R.length?"DELETE":"WRITING"}}];case 1:return M.sent(),[2]}})},O.label=1;case 1:O.trys.push([1,6,7,8]),x=J(h),E=x.next(),O.label=2;case 2:return E.done?[3,5]:(S=E.value,[5,k(S)]);case 3:O.sent(),O.label=4;case 4:return E=x.next(),[3,2];case 5:return[3,8];case 6:return I=O.sent(),T={error:I},[3,8];case 7:try{E&&!E.done&&(v=x.return)&&v.call(x)}finally{if(T)throw T.error}return[7];case 8:return[2]}})}(c)),w=g.next(),m.label=2;case 2:return w.done?[3,5]:(b=w.value,F=b.opCode(n)==="WRITING"?s+s*(Math.random()-.5):t+t*(Math.random()-.5),b.op(n),[4,K(F)]);case 3:m.sent(),m.label=4;case 4:return w=g.next(),[3,2];case 5:return[3,8];case 6:return i=m.sent(),y={error:i},[3,8];case 7:try{w&&!w.done&&(N=g.return)&&N.call(g)}finally{if(y)throw y.error}return[7];case 8:return[2]}})})}function te(n,o,s){var t,e;return s===void 0&&(s=0),_(this,function(c){switch(c.label){case 0:t=o(n),e=t.length,c.label=1;case 1:return s<e?[4,t.slice(0,++s).join("")]:[3,3];case 2:return c.sent(),[3,1];case 3:return[2]}})}function ne(n,o,s){var t,e;return s===void 0&&(s=0),_(this,function(c){switch(c.label){case 0:t=o(n),e=t.length,c.label=1;case 1:return e>s?[4,t.slice(0,--e).join("")]:[3,3];case 2:return c.sent(),[3,1];case 3:return[2]}})}var re="index-module_type__E-SaG";(function(n,o){o===void 0&&(o={});var s=o.insertAt;if(typeof document<"u"){var t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",s==="top"&&t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e),e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}})(`.index-module_type__E-SaG::after {
  content: '|';
  animation: index-module_cursor__PQg0P 1.1s infinite step-start;
}

@keyframes index-module_cursor__PQg0P {
  50% {
    opacity: 0;
  }
}
`);var ae=q.memo(q.forwardRef(function(n,o){var s=n.sequence,t=n.repeat,e=n.className,c=n.speed,l=c===void 0?40:c,u=n.deletionSpeed,p=n.omitDeletionAnimation,f=p!==void 0&&p,a=n.preRenderFirstString,g=a!==void 0&&a,w=n.wrapper,b=w===void 0?"span":w,F=n.splitter,i=F===void 0?function(d){return z([],P(d),!1)}:F,y=n.cursor,N=y===void 0||y,m=n.style,h=function(d,C){var A={};for(var j in d)Object.prototype.hasOwnProperty.call(d,j)&&C.indexOf(j)<0&&(A[j]=d[j]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function"){var G=0;for(j=Object.getOwnPropertySymbols(d);G<j.length;G++)C.indexOf(j[G])<0&&Object.prototype.propertyIsEnumerable.call(d,j[G])&&(A[j[G]]=d[j[G]])}return A}(n,["sequence","repeat","className","speed","deletionSpeed","omitDeletionAnimation","preRenderFirstString","wrapper","splitter","cursor","style"]),k=h["aria-label"],x=h["aria-hidden"],E=h.role;u||(u=l);var S=new Array(2).fill(40);[l,u].forEach(function(d,C){switch(typeof d){case"number":S[C]=Math.abs(d-100);break;case"object":var A=d.type,j=d.value;if(typeof j!="number")break;A==="keyStrokeDelayInMs"&&(S[C]=j)}});var I,T,v,O,R,M,Q=S[0],B=S[1],D=function(d,C){C===void 0&&(C=null);var A=q.useRef(C);return q.useEffect(function(){d&&(typeof d=="function"?d(A.current):d.current=A.current)},[d]),A}(o),U=re;I=e?"".concat(N?U+" ":"").concat(e):N?U:"",T=q.useRef(function(){var d,C=s;t===1/0?d=L:typeof t=="number"&&(C=Array(1+t).fill(s).flat());var A=d?z(z([],P(C),!1),[d],!1):z([],P(C),!1);return L.apply(void 0,z([D.current,i,Q,B,f],P(A),!1)),function(){D.current}}),v=q.useRef(),O=q.useRef(!1),R=q.useRef(!1),M=P(q.useState(0),2)[1],O.current&&(R.current=!0),q.useEffect(function(){return O.current||(v.current=T.current(),O.current=!0),M(function(d){return d+1}),function(){R.current&&v.current&&v.current()}},[]);var V=b,W=g?s.find(function(d){return typeof d=="string"})||"":null;return r.createElement(V,{"aria-hidden":x,"aria-label":k,role:E,style:m,className:I,children:k?r.createElement("span",{"aria-hidden":"true",ref:D,children:W}):W,ref:k?void 0:D})}),function(n,o){return!0});window.questionMap=new Map;const ie=()=>{const[n,o]=q.useState(""),[s,t]=q.useState([]),[e,c]=q.useState(!1),[l,u]=q.useState(!1),p=q.useRef(null),{userId:f}=H(),a=X(),g=async i=>{u(!0),console.log("Creating presentation with items:",i);try{const y=await fetch("https://ai-based-quiz-builder-quizfy-backend.onrender.com/handleQuestions/createPresentation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:f,title:"Untitled Presentation"})}),N=await y.json();if(!y.ok)throw console.log("Failed to create presentation:",N),new Error(N.message||"Failed to create presentation");const m=N.presentationId;for(const h of i){const{designType:k,designTemplate:x,options:E,question:S,description:I}=h,T=await fetch("https://ai-based-quiz-builder-quizfy-backend.onrender.com/handleQuestions/addQuestion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:f,presentationId:m,designType:k,designTemplate:x,options:E,question:S,description:I})}),v=await T.json();if(!T.ok)throw console.log("Failed to add question:",v),new Error(v.message||"Failed to add question");a(`/App/AdminPanel/Presentation/${m}`)}}catch(y){console.log("Error creating presentation:",y)}};q.useEffect(()=>{p.current?.scrollIntoView({behavior:"smooth"})},[s]);const w=async i=>{t(y=>[...y,{role:"user",text:i}]),o(""),c(!0),t(y=>[...y,{role:"bot",type:"loading"}]);try{let m=(await(await fetch("https://ai-based-quiz-builder-quizfy-backend.onrender.com/AIFeatures/sendMessageToAI",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:i})})).json()).reply;typeof m=="string"&&m.includes("```")&&(m=m.replace(/```json|```/g,"").trim());let h;try{h=JSON.parse(m)}catch(k){console.error("JSON parse failed:",k),h={status:"ERROR",reply:"⚠️Something went wrong!"}}t(k=>{const x=[...k];if(x.pop(),Array.isArray(h)){const E=`G${Date.now()}`;return h.forEach((S,I)=>{const T=S.id||`Q${E}_${I}`;window.questionMap.set(T,S)}),[...x,{role:"bot",type:"question-group",groupId:E,questions:h}]}switch(h.status){case"QUESTION":{const E=h.id||`Q${Date.now()}`;return window.questionMap.set(E,h),[...x,{role:"bot",type:"question-group",groupId:E,questions:[h]}]}case"OK":return[...x,{role:"bot",type:"text",text:h.reply}];case"ERROR":return[...x,{role:"bot",type:"error",text:h.reply}];default:return[...x,{role:"bot",type:"text",text:"⚠️ Unexpected response format. Please try again."}]}})}catch(y){console.error("Error communicating with AI:",y),t(N=>{const m=[...N];return m.pop(),[...m,{role:"bot",type:"error",text:"⚠️ Network error. Please try again later."}]})}finally{c(!1)}},b=i=>!i&&i!==""?{text:"",color:"#000000",votes:0,answer:!1}:typeof i=="string"?{text:i,color:"#000000",votes:0,answer:!1}:{text:i.text??"",color:i.color??"#000000",votes:i.votes??0,answer:!!i.answer},F=(i,y)=>{const N=i.designType??"Quiz",m=i.id||`Q${Date.now()}_${y}`,h=i.designTemplate??"bg-BG-1",k=i.question??"Untitled question",x=i.description??"",S=(i.options??[]).map(b),I=S.find(v=>v.answer),T=typeof i.correctOption=="string"&&i.correctOption||I&&I.text||null;return l?r.createElement("div",{className:"h-screen w-screen bg-white top-0 left-0 flex justify-center items-center absolute z-10"},r.createElement("div",{className:"flex flex-col justify-center items-center gap-3"},r.createElement("div",{className:"w-10 h-10 border-4 border-white border-b-indigo-400 rounded-full animate-spin"}),r.createElement("div",{className:"font-Outfit "},"Building up the Presentation!"))):r.createElement("div",{key:m,className:"bg-white border border-gray-100 rounded-2xl p-4 shadow-sm text-gray-800 mb-3"},r.createElement("div",{className:"flex items-center justify-between mb-2"},r.createElement("div",{className:"text-xs font-semibold text-indigo-600 uppercase"},N),r.createElement("div",{className:"text-xs text-gray-400"},h)),r.createElement("h3",{className:"font-semibold text-gray-800 mb-3"},k),r.createElement("div",{className:"grid grid-cols-1 gap-2"},S.map((v,O)=>{const R=T&&v.text===T||v.answer===!0;return r.createElement("div",{key:O,className:`flex items-center justify-between p-3 rounded-lg border ${R?"border-green-400 bg-green-50":"border-gray-200 bg-white"}`},r.createElement("div",{className:"flex items-center gap-3"},r.createElement("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:v.color||"#000000"}}),r.createElement("div",{className:"text-sm font-medium"},r.createElement("span",{className:"mr-2 font-semibold"},String.fromCharCode(65+O),"."),r.createElement("span",null,v.text))),r.createElement("div",{className:"flex items-center gap-3"},r.createElement("div",{className:"text-xs text-gray-500"},v.votes??0," votes"),R&&r.createElement("div",{className:"text-xs text-green-700 font-semibold"},"✔ Correct")))})),x&&r.createElement("p",{className:"mt-3 text-sm text-gray-600"},r.createElement("strong",null,"Explanation:")," ",x))};return r.createElement("main",{className:"w-full h-screen flex pt-2 font-[Outfit] bg-white"},r.createElement("div",{className:"w-full flex flex-col gap-6"},r.createElement("div",{className:"flex flex-col flex-1 pr-10 w-full rounded-3xl mx-8 shadow-inner text-gray-800 overflow-y-auto"},r.createElement("div",{className:"flex-1 w-full max-w-3xl mx-auto px-6 py-8"},s.length===0?r.createElement("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500"},r.createElement("h1",{className:"text-5xl font-semibold bg-gradient-to-r from-indigo-400 to-indigo-700 bg-clip-text text-transparent mb-2"},"AI ASSISTANT"),r.createElement("p",{className:"text-gray-600 text-sm"},"Write a prompt and generate as many questions as you want!",r.createElement("br",null),"Eg :"," ",r.createElement(ae,{sequence:["Generate a easy level quiz question on topic animals.",1e3,"Generate 5 medium level quiz question on topic Artificial Intelligence.",1e3,"Generate 10 hard level quiz question on logical reasoning.",1e3,"Generate 10 questions : 5 quiz on topic DSA, 3 poll question and 2 ranking questions.",1e3],wrapper:"span",speed:60,repeat:1/0}))):s.map((i,y)=>i.type==="question-group"?r.createElement("div",{key:i.groupId,className:"my-3"},i.questions.map((N,m)=>F(N,m)),r.createElement("div",{className:"pt-2 relative flex justify-center"},r.createElement("button",{onClick:()=>g(i.questions),className:"bg-indigo-400 cursor-pointer text-white pt-1 pb-1 pr-4 pl-4 rounded-2xl"},"Create Presentation"))):r.createElement("div",{key:y,className:`my-3 flex ${i.role==="user"?"justify-end":"justify-start"}`},r.createElement("div",{className:`p-3 rounded-2xl max-w-[80%] text-sm shadow-sm ${i.role==="user"?"bg-gradient-to-r from-indigo-400 to-indigo-600 text-white rounded-br-none":"bg-white border border-gray-200 text-gray-800 rounded-bl-none"}`},i.type==="loading"?r.createElement("div",{className:"flex space-x-1 items-center"},r.createElement("span",{className:"dot"}),r.createElement("span",{className:"dot"}),r.createElement("span",{className:"dot"})):r.createElement("div",{className:"whitespace-pre-line"},i.text)))),r.createElement("div",{ref:p})),r.createElement("div",{className:"w-full max-w-3xl mx-auto px-6 mt-auto"},r.createElement("div",{className:"flex items-center w-full bg-white border border-indigo-200 rounded-2xl px-5 py-3 shadow-md focus-within:ring-2 focus-within:ring-indigo-300 transition"},r.createElement("input",{type:"text",className:"flex-1 bg-transparent outline-none text-gray-700 placeholder-gray-400 text-sm",placeholder:"Write your prompt here...",value:n,onChange:i=>o(i.target.value),onKeyDown:i=>{i.key==="Enter"&&n.trim()&&w(n)}}),r.createElement("button",{onClick:()=>n.trim()&&w(n),type:"button",className:"text-indigo-400 cursor-pointer hover:text-indigo-700 transition",disabled:e},r.createElement(Y,{className:"text-xl"}))),r.createElement("div",{className:"pt-3 pb-2 w-full flex justify-center flex-col items-center gap-2"},r.createElement("p",{className:"flex text-center text-xs text-stone-700 font-Outfit"},"This is a customized chatbot that generates multiple choice questions based on you prompts. Limit is 10 questions per request"))))),r.createElement("style",null,`
        .dot {
          width: 6px;
          height: 6px;
          background-color: #6366f1;
          border-radius: 50%;
          display: inline-block;
          animation: blink 1.4s infinite both;
        }
        .dot:nth-child(2) { animation-delay: 0.2s; }
        .dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes blink {
          0%,80%,100% { opacity: 0; }
          40% { opacity: 1; }
        }
      `))};export{ie as default};
