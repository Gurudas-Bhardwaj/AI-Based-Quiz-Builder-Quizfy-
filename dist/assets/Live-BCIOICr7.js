import{r as s,R as e,b as ne,u as le,a as oe,N as ce}from"./index-C_DpItCy.js";import{l as ie}from"./LOGO-AyNIh5tx.js";import{M as me,l as de}from"./HappyBear-Bzg-yIPn.js";import{e as ue,f as fe,b as pe}from"./index-DaIo9BI7.js";import{S as xe}from"./Slogan-ClQ6RCV4.js";import{t as ge}from"./thankYou-MBrqQPpq.js";import{c as be}from"./index-Bmbo64ZC.js";import{t as he,w as Ee}from"./triggerConfetti-BbeImDYP.js";import{C as we}from"./CommentPage-CZgwSqHF.js";import{L as Ne,l as ve,y as ye}from"./index-DESPIqIZ.js";import{T as Ce}from"./index-BtV-0rsm.js";import{Q as ke}from"./QuizEndedPopUp-DKbR305y.js";import{X as y}from"./x-BCRVozpq.js";import{C as L,a as Ie,I as Oe}from"./confetti.module-BPItXqV6.js";import{E as ze}from"./expand-CvscajnH.js";import"./createLucideIcon-BhUsmoD5.js";import"./iconBase-PSZohw3C.js";import"./user-DrHW2tvi.js";const Se=({selectedOption:o,detail:c,onClose:i})=>(s.useEffect(()=>{he()},[]),e.createElement("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 font-Outfit"},e.createElement("div",{className:"relative w-full max-w-md bg-white rounded-xl shadow-2xl border border-gray-200 p-6"},e.createElement("button",{onClick:()=>i(!1),"aria-label":"Close",className:"absolute cursor-pointer top-4 right-4 p-2 rounded-md text-gray-400 hover:text-gray-600 transition"},e.createElement(y,{size:20})),e.createElement("div",{className:"flex justify-center mb-4"},e.createElement(L,{className:"text-emerald-600",size:72,strokeWidth:2.5})),e.createElement("h2",{className:"text-2xl font-semibold text-gray-900 text-center mb-2"},"Correct Answer!"),e.createElement("p",{className:"text-gray-600 text-center mb-6"},"Well done â€” you selected the right option."),e.createElement("div",{className:"p-4 rounded-lg border border-emerald-200 bg-emerald-50 mb-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-9 w-9 items-center justify-center rounded-md bg-emerald-100"},e.createElement(L,{size:20,className:"text-emerald-600"})),e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"text-xs text-gray-500"},"Correct answer"),e.createElement("div",{className:"text-sm font-medium text-gray-900"},o.text)))),e.createElement("div",{className:"bg-gray-50 rounded-md border border-gray-200 p-4 text-sm text-gray-700 mb-6"},e.createElement("div",{className:"font-medium text-gray-800 mb-1"},"Why this is correct"),e.createElement("p",{className:"leading-relaxed"},c||"Nothing Provided by Admin!")),e.createElement("button",{onClick:()=>i(!1),className:"w-full cursor-pointer bg-emerald-600 text-white font-semibold py-3 rounded-lg hover:bg-emerald-700 transition"},"Continue")))),Pe=({onClose:o,selectedOption:c,CorrectOption:i,detail:p})=>{const[g,r]=s.useState(!1);return s.useEffect(()=>{r(!0)},[]),e.createElement(e.Fragment,null,e.createElement("style",null,`
        @keyframes scaleIn {
          0% { transform: scale(0.9); opacity: 0; }
          100% { transform: scale(1); opacity: 1; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          20% { transform: translateX(-6px); }
          40% { transform: translateX(6px); }
          60% { transform: translateX(-4px); }
          80% { transform: translateX(4px); }
        }
        @keyframes bgRedPulse {
          0%, 100% { background-color: rgba(0,0,0,0.6); }
          50% { background-color: rgba(220,38,38,0.7); }
        }
        .animate-wrong {
          animation: scaleIn 0.3s ease-out,
                     shake 0.5s ease-in-out 0.3s;
        }
        .bg-red-pulse {
          animation: bgRedPulse 1.2s ease-in-out forwards;
        }
      `),e.createElement("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4 font-Outfit bg-black/60 bg-red-pulse"},e.createElement("div",{className:`relative w-full max-w-md bg-white rounded-xl shadow-2xl border border-gray-200 p-6 ${g?"animate-wrong":""}`},e.createElement("button",{onClick:()=>o(!1),"aria-label":"Close",className:"absolute cursor-pointer top-4 right-4 p-2 rounded-md text-gray-400 hover:text-gray-600 transition"},e.createElement(y,{size:20})),e.createElement("div",{className:"flex justify-center mb-4"},e.createElement(Ie,{className:"text-red-600",size:72,strokeWidth:2.5})),e.createElement("h2",{className:"text-2xl font-semibold text-gray-900 text-center mb-2"},"Wrong Answer"),e.createElement("p",{className:"text-gray-600 text-center mb-6"},"Your selected answer is incorrect."),e.createElement("div",{className:"p-4 rounded-lg border border-red-200 bg-red-50 mb-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-9 w-9 items-center justify-center rounded-md bg-red-100"},e.createElement(y,{size:20,className:"text-red-600"})),e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"text-xs text-gray-500"},"Your answer"),e.createElement("div",{className:"text-sm font-medium text-gray-900"},c)))),e.createElement("div",{className:"bg-gray-50 rounded-md border border-gray-200 p-4 text-sm text-gray-700 mb-6"},e.createElement("div",{className:"font-bold text-base text-green-800 mb-1"},"Correct Option : ",i),e.createElement("p",{className:"leading-relaxed"},p||"Nothing Provided By Admin!")),e.createElement("button",{onClick:()=>o(!1),className:"w-full cursor-pointer bg-red-600 text-white font-semibold py-3 rounded-lg hover:bg-red-700 transition"},"Better Luck, Next time!"))))},Ve=()=>{const{presentationId:o}=ne(),{userId:c,userName:i}=le(),p=localStorage.getItem("accessToken"),g=oe(),[r,b]=s.useState([]),[x,m]=s.useState(0),[l,d]=s.useState(null),[h,C]=s.useState(!1),[Q,T]=s.useState(!1),[R,E]=s.useState(""),[U,f]=s.useState(!1),[q,w]=s.useState(!0),[B,M]=s.useState(!1),[X,k]=s.useState([]),[$,I]=s.useState(!1),[H,O]=s.useState(!1),[W,z]=s.useState(!1),[S,Y]=s.useState(""),[P,_]=s.useState(""),[j,G]=s.useState(""),[V,J]=s.useState(!1),n=s.useRef(null),A=s.useRef(null),D=async()=>{n.current=de("https://quizidy-backend.duckdns.org/userControlledQuiz",{transports:["websocket","polling"]}),n.current.emit("quizJoinedByUser",{presentationId:o,userId:c,userName:i,accessToken:p}),n.current.on("questionForUser",({questions:t})=>{b(t),I(!0),console.log(t);const a=t.findIndex(u=>u.attempted===!1);a!==-1?(m(a),d(t[a])):(m(0),d(t[0]||null))}),n.current.on("unauthorized",()=>{J(!0)}),n.current.on("updatedQuestion",t=>{b(a=>a.map(u=>u._id===t.questionId?{...u,attempted:t.attempted,selectedOption:t.optionId}:u)),f(!0),w(!0),E("Successfully Submitted!"),setTimeout(()=>{f(!1)},[2e3])}),n.current.emit("getComments",{presentationId:o}),n.current.on("commentUpdate",({comments:t})=>{console.log("Received comments:",t),k(t||[])}),n.current.on("newComment",t=>{k(a=>[...a,t]),ye.success("New Message!",{icon:e.createElement(Ce,{className:"text-indigo-500 text-lg"}),position:"top-right",autoClose:3e3})}),n.current.on("quizEnded",({message:t})=>{console.log(t),M(!0),d([]),b([]),m(null)}),n.current.on("error",({message:t})=>{console.log(t),I(!1)})},K=t=>{n.current.emit("sendComment",{presentationId:o,userId:c,userName:i,message:t})},Z=async(t,a)=>{const u=t._id,N=a._id;if(console.log("Option Id : ",N),n.current.emit("handleVotes",{presentationId:o,userId:c,questionId:u,optionId:N,userName:i}),t.designType==="quiz"){const v=t.options.filter(ae=>ae.answer!==!1),F=v[0]._id;console.log("Correct option inside : ",v),console.log("Correct option inside Id : ",F),_(v[0].text),Y(a.text),G(t.description),F==N?O(!0):z(!0)}},ee=()=>{if(console.log("going to next"),!r.length)return;let t=x+1;for(;t<r.length&&r[t].attempted;)t++;t<r.length?(m(t),d(r[t])):(f(!0),E("No more Question Left !"),w(!1),setTimeout(()=>{f(!1)},[2e3]))},te=()=>{if(!r.length)return;let t=x-1;for(;t>=0&&r[t].attempted;)t--;t>=0?(m(t),d(r[t])):(f(!0),w(!1),E("Nothing top Go Back !"),setTimeout(()=>{f(!1)},[2e3]))},se=()=>{const t=A.current;t&&t.requestFullscreen?t.requestFullscreen().catch(a=>{console.warn("Fullscreen request failed:",a)}):console.warn("Fullscreen API is not supported in this browser.")};s.useEffect(()=>{D()},[]);const re=()=>{if(r.length&&r[x]?.attempted){let t=x+1;for(;t<r.length&&r[t].attempted;)t++;if(t<r.length)m(t),d(r[t]);else{for(t=0;t<r.length&&r[t].attempted;)t++;t<r.length&&(m(t),d(r[t]))}}};return s.useEffect(()=>{re()},[r]),e.createElement("div",{ref:A,className:"w-screen overflow-hidden h-screen relative flex"},e.createElement("div",{className:`w-full h-full  flex flex-col gap-5 justify-center ${l?l.designTemplate:""} items-center bg-cover bg-center bg-no-repeat`},B&&e.createElement(ke,null),e.createElement(Ne,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!1,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light",transition:ve}),e.createElement("div",{className:""},e.createElement("img",{src:ie,className:"w-48",alt:""})),e.createElement("div",{className:"flex flex-col gap-6  w-full justify-center items-center "},$?r.length?r.every(t=>t.attempted)?e.createElement("div",{className:"w-full flex flex-col items-center justify-center py-20"},e.createElement("div",{className:"  p-8 flex flex-col items-center"},e.createElement("img",{src:ge,alt:"",className:"w-30 animate-bounce pb-5 "}),e.createElement("h2",{className:"font-Montserrat text-2xl md:text-3xl lg:text-4xl font-bold text-center text-stone-700 mb-2"},"You have Completed the current Quiz!"),e.createElement("p",{className:"text-gray-900 text-xs sm:text-md md:text-base font-Outfit w-[90%] sm:w-[80%] md:w-[70%] lg:w-[60%] text-center "},"Thanks for using Quizfy, how's your experience so Far please ",e.createElement("span",{className:"text-indigo-500"}," Rate ")," us! You may Leave now or wait for Admin to restart the quiz again."),e.createElement(ce,{to:"/App/Admin/Home",className:"font-Outfit pt-5 text-indigo-500 font-black flex justify-center items-center gap-2 text-xs sm:text-md md:text-base cursor-pointer"},"GO TO HOME ",e.createElement(be,null)))):l?e.createElement(e.Fragment,null,e.createElement("div",{className:"font-Outfit w-full flex justify-center items-center pl-5 pr-5 text-center text-2xl"},"Q) ",l.question),l.Image!=null?e.createElement("div",{className:"w-full h-[300px] flex justify-center items-center"},e.createElement("img",{className:"h-full",src:l.Image,alt:""})):null,e.createElement("div",{className:` ${l.Image==null?"flex w-[90%] sm:w-[80%] md:w-[40%] flex-col justify-center items-center":"grid grid-cols-2 w-[60%]"} gap-4 px-4 sm:px-8`},(l.options||[]).map((t,a)=>e.createElement("div",{key:t._id||a,className:`h-16 ${l.Image==null?"w-[80%]":"w-[100%]"} cursor-pointer text-white font-Outfit flex items-center px-4 rounded-xl transition-all duration-300 hover:scale-[1.01] bg-stone-900`,onClick:()=>Z(l,t)},e.createElement("span",{className:"w-full text-sm sm:text-base md:text-lg"},t.text)))),e.createElement("div",{className:"w-full mt- flex flex-col  justify-center items-center gap-4"},e.createElement("div",{className:"w-full flex gap-4 justify-center items-center"},e.createElement("div",null,e.createElement("button",{className:"font-Outfit flex justify-center items-center gap-2 text-lg h-10 w-40 rounded-2xl bg-black hover:scale-110 transition-all ease-in-out duration-100 cursor-pointer text-white",onClick:()=>te()},e.createElement(ue,null),"Previous")),e.createElement("div",null,e.createElement("button",{className:"font-Outfit flex justify-center items-center gap-2 text-lg h-10 w-40 rounded-2xl bg-black hover:scale-110 transition-all ease-in-out duration-100 cursor-pointer text-white",onClick:()=>ee()},"Next ",e.createElement(fe,null)))))):null:e.createElement("div",{className:"w-full flex flex-col items-center justify-center py-20"},e.createElement("div",{className:"bg-white rounded-xl shadow p-8 flex flex-col items-center"},e.createElement("h2",{className:"font-Outfit text-2xl text-stone-700 mb-2"},"No questions available"),e.createElement("p",{className:"text-stone-400 text-sm"},"No questions have been loaded for this quiz."))):e.createElement("div",{className:"w-screen h-screen overflow-hidden  bg-BG-8  bg-no-repeat bg-cover bg-center "},e.createElement("div",{className:"w-full h-full flex flex-col justify-center items-center gap-5"},e.createElement("div",{className:"w-full flex justify-center items-center"},e.createElement("img",{src:Ee,className:"h-23 animate-bounce",alt:"Please wait"})),e.createElement("div",{className:"text-stone-700 text-xl sm:text-2xl md:text-3xl font-Outfit"},"Waiting for the Presenter to Start the Quiz!"),e.createElement("div",{className:"w-full flex justify-center items-center "},e.createElement("p",{className:"text-xs md:text-sm lg:text-base text-center font-Outfit xs:w-[90%] sm:w-[80%] md:w-[60%] lg:w-[50%] text-gray-900"},"If Presenter is Live and you are unable to see the question, please refresh the page once or check your Joining Link. If the Problem presists conta  ct us!")))))),e.createElement("div",{className:"fixed bottom-6 right-[155px] md:bottom-8 md:right-[155px] cursor-pointer p-3 border border-stone-300 rounded-full bg-stone-900 z-10 shadow-md",onClick:se},e.createElement(ze,{color:"white"})),e.createElement("div",{className:"fixed bottom-6 right-[96px] md:bottom-8 md:right-[96px] cursor-pointer p-3 border border-stone-300 rounded-full bg-stone-900 z-10 shadow-md",onClick:()=>T(!Q)},e.createElement(Oe,{color:"white"})),e.createElement("div",{className:"fixed bottom-6 right-10 md:bottom-8 md:right-10 cursor-pointer p-3 border border-stone-300 rounded-full bg-stone-900 z-10 shadow-md",onClick:()=>C(!h)},e.createElement(me,{color:"white"})),e.createElement("div",{className:`fixed left-[18%] sm:left-[55%] top-[23%] md:left-[60%] lg:top-[23%] lg:left-[72%] z-50 w-[90%] sm:w-[400px] max-w-[90%] transition-all ease-in-out duration-500 ${h?"opacity-100":"opacity-0 pointer-events-none"}`},e.createElement(we,{commentList:X,sendComment:K,onClose:()=>C(!1),isVisible:h})),e.createElement("div",{className:"fixed top-[86%] w-screen"},e.createElement("div",{className:`w-full absolute  left-[40%] ${U?"translate-x-3 opacity-100 pointer-events-auto":"translate-x-0 pointer-events-none opacity-0"}`},e.createElement(xe,{status:q,details:R}))),H&&e.createElement("div",{className:"absolute top-0 left-0 "},e.createElement(Se,{onClose:O,CorrectOption:P,selectedOption:S,detail:j})),W&&e.createElement("div",{className:"absolute top-0 left-0 "},e.createElement(Pe,{onClose:z,CorrectOption:P,selectedOption:S,detail:j})),e.createElement("div",{className:`w-screen z-[99999] h-screen transition-all duration-300 ease-in-out absolute top-0 left-0 ${V?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`},e.createElement("section",{className:"w-full h-screen flex flex-col items-center justify-center bg-stone-950/90 font-Outfit px-4"},e.createElement("div",{className:"bg-white rounded-xl shadow-lg p-8 flex flex-col items-center gap-6 text-center max-w-md w-full"},e.createElement(pe,{className:"text-yellow-500 text-6xl"}),e.createElement("h1",{className:"text-2xl font-semibold text-stone-800"},"Unauthorized Access"),e.createElement("p",{className:"text-stone-500 text-sm"},"You can't access it as a user because you are the admin of this quiz, if you still want to access it for testing purposes please login with another account who is not the admin of this presentation."),e.createElement("button",{onClick:()=>g("/App/Admin/Home"),className:"mt-4 px-6 py-2 cursor-pointer bg-indigo-500 hover:bg-indigo-600 text-white rounded-md transition"},"Go Back Home")))))};export{Ve as default};
