import{r as s,R as e,u as B,b as T}from"./index-DCL0-DEA.js";import{e as $,f as W}from"./index-Dk-B05cK.js";import{l as Y}from"./LOGO-AyNIh5tx.js";import{t as L}from"./thankYou-MBrqQPpq.js";import{X as y}from"./x-cSV64bib.js";import{a as V,c as E,C as A,I as G}from"./confetti.module-C6P0llxm.js";import{E as M}from"./expand-CXrmO-0P.js";import"./iconBase-C63K2-Yw.js";import"./createLucideIcon-Ck5qhuoD.js";const J=({onClose:a,selectedOption:u,CorrectOption:i,detail:c})=>{const[n,x]=s.useState(!1);return s.useEffect(()=>{x(!0)},[]),e.createElement(e.Fragment,null,e.createElement("style",null,`
        @keyframes scaleIn {
          0% { transform: scale(0.9); opacity: 0; }
          100% { transform: scale(1); opacity: 1; }
        }
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          20% { transform: translateX(-6px); }
          40% { transform: translateX(6px); }
          60% { transform: translateX(-4px); }
          80% { transform: translateX(4px); }
        }
        @keyframes bgRedPulse {
          0%, 100% { background-color: rgba(0,0,0,0.6); }
          50% { background-color: rgba(220,38,38,0.7); }
        }
        .animate-wrong {
          animation: scaleIn 0.3s ease-out,
                     shake 0.5s ease-in-out 0.3s;
        }
        .bg-red-pulse {
          animation: bgRedPulse 1.2s ease-in-out forwards;
        }
      `),e.createElement("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4 font-Outfit bg-black/60 bg-red-pulse"},e.createElement("div",{className:`relative w-full max-w-md bg-white rounded-xl shadow-2xl border border-gray-200 p-6 ${n?"animate-wrong":""}`},e.createElement("button",{onClick:()=>a(!1),"aria-label":"Close",className:"absolute cursor-pointer top-4 right-4 p-2 rounded-md text-gray-400 hover:text-gray-600 transition"},e.createElement(y,{size:20})),e.createElement("div",{className:"flex justify-center mb-4"},e.createElement(V,{className:"text-red-600",size:72,strokeWidth:2.5})),e.createElement("h2",{className:"text-2xl font-semibold text-gray-900 text-center mb-2"},"Wrong Answer"),e.createElement("p",{className:"text-gray-600 text-center mb-6"},"Your selected answer is incorrect."),e.createElement("div",{className:"p-4 rounded-lg border border-red-200 bg-red-50 mb-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-9 w-9 items-center justify-center rounded-md bg-red-100"},e.createElement(y,{size:20,className:"text-red-600"})),e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"text-xs text-gray-500"},"Your answer"),e.createElement("div",{className:"text-sm font-medium text-gray-900"},u)))),e.createElement("div",{className:"bg-gray-50 rounded-md border border-gray-200 p-4 text-sm text-gray-700 mb-6"},e.createElement("div",{className:"font-bold text-base text-green-800 mb-1"},"Correct Option : ",i),e.createElement("p",{className:"leading-relaxed"},c||"Nothing Provided By Admin!")),e.createElement("button",{onClick:()=>a(!1),className:"w-full cursor-pointer bg-red-600 text-white font-semibold py-3 rounded-lg hover:bg-red-700 transition"},"Better Luck, Next time!"))))},U=()=>{const u=Date.now()+300,i=["#4CAF50","#81C784","#A5D6A7","#C8E6C9","#B2DFDB","#E6EE9C"],c=()=>{Date.now()>u||(E({particleCount:10,angle:60,spread:100,startVelocity:80,origin:{x:.7,y:1},colors:i,shapes:["circle","square"],scalar:1.2}),E({particleCount:10,angle:120,spread:100,startVelocity:80,origin:{x:.3,y:1},colors:i,shapes:["circle","square"],scalar:1.2}),E({particleCount:10,angle:90,spread:100,startVelocity:80,origin:{x:.5,y:1},colors:i,shapes:["circle","square"],scalar:1.2}),requestAnimationFrame(c))};c()},H=({selectedOption:a,detail:u,onClose:i,showConfetti:c=!0})=>(s.useEffect(()=>{c&&U()},[c]),e.createElement("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 font-Outfit"},e.createElement("div",{className:"relative w-full max-w-md bg-white rounded-xl shadow-2xl border border-gray-200 p-6"},e.createElement("button",{onClick:()=>i(!1),"aria-label":"Close",className:"absolute cursor-pointer top-4 right-4 p-2 rounded-md text-gray-400 hover:text-gray-600 transition"},e.createElement(y,{size:20})),e.createElement("div",{className:"flex justify-center mb-4"},e.createElement(A,{className:"text-emerald-600",size:72,strokeWidth:2.5})),e.createElement("h2",{className:"text-2xl font-semibold text-gray-900 text-center mb-2"},"Correct Answer!"),e.createElement("p",{className:"text-gray-600 text-center mb-6"},"Well done â€” you selected the right option."),e.createElement("div",{className:"p-4 rounded-lg border border-emerald-200 bg-emerald-50 mb-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("div",{className:"flex h-9 w-9 items-center justify-center rounded-md bg-emerald-100"},e.createElement(A,{size:20,className:"text-emerald-600"})),e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"text-xs text-gray-500"},"Correct answer"),e.createElement("div",{className:"text-sm font-medium text-gray-900"},a.text)))),e.createElement("div",{className:"bg-gray-50 rounded-md border border-gray-200 p-4 text-sm text-gray-700 mb-6"},e.createElement("div",{className:"font-medium text-gray-800 mb-1"},"Why this is correct"),e.createElement("p",{className:"leading-relaxed"},u||"Nothing Provided by Admin!")),e.createElement("button",{onClick:()=>i(!1),className:"w-full cursor-pointer bg-emerald-600 text-white font-semibold py-3 rounded-lg hover:bg-emerald-700 transition"},"Continue")))),le=()=>{const[a,u]=s.useState([]),{userId:i}=B(),{presentationId:c}=T(),[n,x]=s.useState(null),[f,b]=s.useState(0),[z,h]=s.useState(!1),[P,w]=s.useState(!1),[p,N]=s.useState({isCorrect:!1,selectedOption:"",correctOption:"",description:"",selectedOptionObj:null}),[F,g]=s.useState(!1),[v,C]=s.useState(!1),[Q,O]=s.useState(!1),[k,I]=s.useState(!1),j=s.useRef(null),S=a.length>0?a.every(t=>t.attempted?.attempted===!0):!1,q=async(t,r)=>{if(t.attempted?.attempted===!0)return;const m=t.options.find(o=>o.answer===!0),l=r.answer===!0;u(o=>o.map(d=>d._id===t._id?{...d,attempted:{attempted:!0,optionId:r._id,timeStamp:new Date().toISOString()}}:d)),N({isCorrect:l,selectedOption:r.text,correctOption:m.text,description:t.description,selectedOptionObj:r}),l?(O(!0),h(!0)):w(!0);try{(await fetch("https://quizidy-backend.duckdns.org/AIFeatures/SubmitAnswerForAIPoweredQuiz",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({presentationId:c,userId:i,questionId:t._id,selectedOptionId:r._id})})).ok?console.log("Answer submitted successfully"):console.error("Failed to submit answer to backend")}catch(o){console.error("Error submitting answer:",o)}},_=()=>{f<a.length-1&&b(f+1)},D=()=>{f>0&&b(f-1)},R=()=>{const t=j.current;t&&t.requestFullscreen&&t.requestFullscreen().catch(r=>{console.warn("Fullscreen request failed:",r)})},X=async()=>{try{g(!0);const t=await fetch(`https://quizidy-backend.duckdns.org/AIFeatures/GetQuestionsForAIPoweredQuiz/${c}/${i}`);if(!t.ok){console.error("Failed to fetch questions"),g(!1);return}const r=await t.json();console.log("Fetched questions:",r);const m=r.questions||[];u(m);const l=m.findIndex(d=>d.attempted?.attempted!==!0),o=l!==-1?l:0;b(o),x(m[o]||null),g(!1)}catch(t){console.error("Error while fetching questions:",t),g(!1)}};return s.useEffect(()=>{X()},[]),s.useEffect(()=>{if(a.length>0){const t=Math.min(Math.max(f,0),a.length-1);x(a[t]),S&&!k&&I(!0)}},[a,f,S]),F?e.createElement("div",{className:"w-screen h-screen bg-white flex justify-center items-center fixed top-0 left-0 z-10 "},e.createElement("div",{className:"flex justify-center items-center flex-col gap-2"},e.createElement("div",{className:"h-10 w-10 border-4 border-gray-200 border-t-indigo-500 rounded-full animate-spin"}),e.createElement("div",{className:"font-Outfit flex justify-center items-center"},e.createElement("h1",null,"Building up your Quiz.")))):e.createElement("div",{ref:j,className:"w-screen overflow-hidden h-screen relative flex"},e.createElement("div",{className:`w-full h-full flex flex-col gap-5 justify-center ${n?.designTemplate||"bg-BG-3"} items-center bg-cover bg-center bg-no-repeat`},e.createElement("div",null,e.createElement("img",{src:Y,className:"w-48",alt:"Logo"})),e.createElement("div",{className:"flex flex-col gap-6 w-full justify-center items-center"},e.createElement("div",{className:"font-Outfit  w-full flex justify-center items-center pl-5 pr-5 text-center text-2xl"},"Q) ",n?.question||""),e.createElement("div",{className:"flex w-[90%] sm:w-[80%] md:w-[40%] flex-col justify-center items-center gap-4 px-4 sm:px-8"},!n?.options?.length&&e.createElement("div",{className:"text-stone-700 font-Outfit"},"No options available for this question."),(n?.options||[]).map((t,r)=>{const m=n.attempted?.attempted===!0&&t._id===n.attempted?.optionId,l=t.answer===!0,o=n.attempted?.attempted===!0;let d="bg-stone-900";return o&&(m?d=l?"bg-green-400":"bg-red-600":l?d="bg-green-400":d="bg-stone-700"),e.createElement("div",{key:t._id||r,className:`h-16 w-[80%] cursor-pointer text-white font-Outfit flex items-center px-4 rounded-xl transition-all duration-300 hover:scale-[1.01] ${d} ${o&&!m?"cursor-not-allowed":""}`,onClick:()=>!o&&q(n,t)},e.createElement("span",{className:"w-full text-sm sm:text-base md:text-lg"},t.text))})),n?.attempted?.attempted===!0&&e.createElement("div",{className:"flex gap-3 items-center flex-wrap justify-center"},e.createElement("div",{className:"bg-indigo-400 text-white font-Outfit rounded-md px-4 py-2 shadow-sm"},"Already Attempted"),e.createElement("button",{onClick:()=>{const t=n.options.find(l=>l.answer===!0),r=n.options.find(l=>l._id===n.attempted?.optionId),m=r?.answer===!0;N({isCorrect:m,selectedOption:r?.text||"",correctOption:t?.text||"",description:n.description,selectedOptionObj:r}),O(!1),m?h(!0):w(!0)},className:"bg-emerald-500 hover:bg-emerald-600 text-white font-Outfit rounded-md px-4 py-2 shadow-sm transition-colors"},"View Explanation")),e.createElement("div",{className:"w-full mt-4 flex flex-col justify-center items-center gap-4"},e.createElement("div",{className:"w-full flex gap-4 justify-center items-center"},e.createElement("div",null,e.createElement("button",{className:"font-Outfit flex justify-center items-center gap-2 text-lg h-10 w-40 rounded-2xl bg-black hover:scale-110 transition-all ease-in-out duration-100 cursor-pointer text-white",onClick:D},e.createElement($,null),"Previous")),e.createElement("div",null,e.createElement("button",{className:"font-Outfit flex justify-center items-center gap-2 text-lg h-10 w-40 rounded-2xl bg-black hover:scale-110 transition-all ease-in-out duration-100 cursor-pointer text-white",onClick:_},"Next ",e.createElement(W,null))))))),e.createElement("div",{className:"fixed bottom-6 right-[96px] md:bottom-8 md:right-[96px] cursor-pointer p-3 border border-stone-300 rounded-full bg-stone-900 z-10 shadow-md",onClick:R},e.createElement(M,{color:"white"})),e.createElement("div",{className:"fixed bottom-6 right-10 md:bottom-8 md:right-10 cursor-pointer p-3 border border-stone-300 rounded-full bg-stone-900 z-10 shadow-md",onClick:()=>C(!v)},e.createElement(G,{color:"white"})),k&&e.createElement("div",{className:"fixed inset-0 bg-black/50 flex justify-center items-center z-50"},e.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-8 flex flex-col items-center gap-6 max-w-md mx-4"},e.createElement("img",{src:L,alt:"Thank You",className:"w-32 h-32 object-contain animate-bounce"}),e.createElement("h2",{className:"text-2xl md:text-3xl font-Outfit font-bold text-center text-stone-800"},"You have Completed the Quiz!"),e.createElement("p",{className:"text-stone-600 text-sm text-center font-Outfit"},"Thanks for using Quizify! You can continue reviewing your answers or close this message."),e.createElement("button",{onClick:()=>I(!1),className:"px-6 py-2 bg-indigo-500 hover:bg-indigo-600 text-white rounded-lg transition-all duration-200 font-Outfit"},"Continue Reviewing"))),v&&e.createElement("div",{className:"fixed font-Outfit top-20 right-10 bg-white rounded-lg shadow-lg p-4 w-80 z-50 border border-stone-200"},e.createElement("h3",{className:"font-Outfit font-semibold text-stone-800 mb-2"},"Quiz Information"),e.createElement("p",{className:"text-sm text-stone-600 font-Outfit"},"This is a AI Powered Quiz. Answer all questions by selecting an option. Once submitted, you cannot change your answer. Use Next/Previous to navigate between questions."),e.createElement("button",{onClick:()=>C(!1),className:"mt-3 bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-1 rounded-md text-sm"},"Close")),z&&e.createElement(H,{onClose:h,selectedOption:p.selectedOptionObj||{text:p.selectedOption},detail:p.description,showConfetti:Q}),P&&e.createElement(J,{onClose:w,selectedOption:p.selectedOption,CorrectOption:p.correctOption,detail:p.description}))};export{le as default};
